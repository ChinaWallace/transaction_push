# TradingView功能和策略系统配置示例
# 复制此文件为 .env 并根据需要修改配置

# =============================================================================
# 基础应用配置
# =============================================================================
APP_NAME=Python Trading Tool
APP_VERSION=2.0.0
DEBUG=true
LOG_LEVEL=INFO
HOST=0.0.0.0
PORT=8000

# =============================================================================
# 数据库配置
# =============================================================================
DATABASE_URL=mysql+pymysql://root:password@localhost:3306/trading_db
DATABASE_ECHO=false

# =============================================================================
# 币安API配置 (可选)
# =============================================================================
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here
BINANCE_TESTNET=false
BINANCE_BASE_URL=https://fapi.binance.com

# =============================================================================
# OKX API配置 (推荐 - 主要交易所)
# =============================================================================
OKX_API_KEY=你的
OKX_SECRET_KEY=你的
OKX_PASSPHRASE=你的
OKX_SANDBOX=false
OKX_BASE_URL=https://www.okx.com

# =============================================================================
# 代理配置 (可选)
# =============================================================================
PROXY_ENABLED=false
PROXY_URL=http://127.0.0.1:7890

# =============================================================================
# TradingView功能配置
# =============================================================================
# 启用Pine Script风格指标
TRADINGVIEW_CONFIG__ENABLE_PINE_INDICATORS=true

# 启用成交量分布分析
TRADINGVIEW_CONFIG__ENABLE_VOLUME_PROFILE=true

# 启用订单流分析 (消耗更多资源)
TRADINGVIEW_CONFIG__ENABLE_ORDER_FLOW=false

# 支持的图表时间周期
TRADINGVIEW_CONFIG__CHART_TIMEFRAMES=["1m","5m","15m","1h","4h","1d"]

# =============================================================================
# 策略配置
# =============================================================================
# SuperTrend策略参数
STRATEGY_CONFIG__SUPERTREND__PERIOD=10
STRATEGY_CONFIG__SUPERTREND__MULTIPLIER=3.0
STRATEGY_CONFIG__SUPERTREND__TIMEFRAMES=["1d","4h","1h","15m"]

# 成交量策略参数
STRATEGY_CONFIG__VOLUME__THRESHOLD_MULTIPLIER=3.0
STRATEGY_CONFIG__VOLUME__CONSECUTIVE_PERIODS=3

# 资金费率策略参数
STRATEGY_CONFIG__FUNDING_RATE__NEGATIVE_THRESHOLD=-0.001
STRATEGY_CONFIG__FUNDING_RATE__HIGH_THRESHOLD=0.1

# =============================================================================
# 数据缓存配置
# =============================================================================
# 启用数据缓存
CACHE_CONFIG__ENABLE_CACHE=true

# 缓存过期时间 (分钟)
CACHE_CONFIG__CACHE_TTL_MINUTES=5

# 最大缓存大小 (MB)
CACHE_CONFIG__MAX_CACHE_SIZE_MB=100

# 启用缓存压缩
CACHE_CONFIG__CACHE_COMPRESSION=true

# =============================================================================
# 监控参数配置
# =============================================================================
# 持仓量变化阈值 (1.05 = 5%增长触发)
OPEN_INTEREST_THRESHOLD=1.05

# 成交量异常倍数
VOLUME_MULTIPLIER=3.0

# 各种监控间隔 (分钟)
FUNDING_RATE_INTERVAL=240
TREND_ANALYSIS_INTERVAL=15
OPEN_INTEREST_INTERVAL=5
VOLUME_MONITOR_INTERVAL=60

# =============================================================================
# 通知推送配置 (至少配置一个)
# =============================================================================
# 飞书机器人
FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/your_webhook_key

# 企业微信机器人
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key

# Telegram机器人
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# 邮件通知
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_FROM=your_email@gmail.com

# =============================================================================
# 日志配置
# =============================================================================
LOG_FORMAT=text
LOG_ROTATION=1 day
LOG_RETENTION=30 days
LOG_PATH=logs/

# =============================================================================
# 安全配置
# =============================================================================
SECRET_KEY=your_secret_key_here
ACCESS_TOKEN_EXPIRE_MINUTES=30
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# 任务调度配置
# =============================================================================
SCHEDULER_TIMEZONE=Asia/Shanghai
DATA_RETENTION_DAYS=30

# =============================================================================
# 机器学习增强配置
# =============================================================================
# 启用ML功能
ML_CONFIG__ENABLE_ML_PREDICTION=true
ML_CONFIG__ENABLE_ANOMALY_DETECTION=true
ML_CONFIG__ENABLE_ADAPTIVE_OPTIMIZATION=true

# 预测模型配置
ML_CONFIG__PREDICTION_MODEL__MODEL_TYPE=random_forest
ML_CONFIG__PREDICTION_MODEL__LOOKBACK_PERIODS=50
ML_CONFIG__PREDICTION_MODEL__PREDICTION_HORIZON=5
ML_CONFIG__PREDICTION_MODEL__RETRAIN_INTERVAL_HOURS=24
ML_CONFIG__PREDICTION_MODEL__MIN_ACCURACY_THRESHOLD=0.6

# 异常检测配置
ML_CONFIG__ANOMALY_DETECTION__ALGORITHM=isolation_forest
ML_CONFIG__ANOMALY_DETECTION__CONTAMINATION=0.1
ML_CONFIG__ANOMALY_DETECTION__SENSITIVITY=0.8
ML_CONFIG__ANOMALY_DETECTION__MIN_SAMPLES=100

# 自适应优化配置
ML_CONFIG__ADAPTIVE_OPTIMIZATION__ENABLE_PARAMETER_TUNING=true
ML_CONFIG__ADAPTIVE_OPTIMIZATION__OPTIMIZATION_INTERVAL_HOURS=12
ML_CONFIG__ADAPTIVE_OPTIMIZATION__PERFORMANCE_WINDOW_DAYS=7
ML_CONFIG__ADAPTIVE_OPTIMIZATION__MIN_IMPROVEMENT_THRESHOLD=0.05

# 特征工程配置
ML_CONFIG__FEATURE_ENGINEERING__TECHNICAL_INDICATORS=true
ML_CONFIG__FEATURE_ENGINEERING__PRICE_PATTERNS=true
ML_CONFIG__FEATURE_ENGINEERING__VOLUME_FEATURES=true
ML_CONFIG__FEATURE_ENGINEERING__MARKET_MICROSTRUCTURE=true

# =============================================================================
# 监控币种配置
# =============================================================================
# 监控的交易对列表 (OKX格式)
MONITORED_SYMBOLS=["BTC-USDT-SWAP","ETH-USDT-SWAP","SOL-USDT-SWAP","DOGE-USDT-SWAP","XRP-USDT-SWAP"]

# =============================================================================
# 性能优化配置建议
# =============================================================================

# 高性能配置 (适合服务器环境)
# CACHE_CONFIG__MAX_CACHE_SIZE_MB=200
# CACHE_CONFIG__CACHE_TTL_MINUTES=10
# TRADINGVIEW_CONFIG__ENABLE_ORDER_FLOW=true
# ML_CONFIG__PREDICTION_MODEL__LOOKBACK_PERIODS=100

# 低资源配置 (适合个人电脑)
# CACHE_CONFIG__MAX_CACHE_SIZE_MB=50
# TRADINGVIEW_CONFIG__ENABLE_ORDER_FLOW=false
# TRADINGVIEW_CONFIG__CHART_TIMEFRAMES=["1h","4h","1d"]
# ML_CONFIG__ENABLE_ADAPTIVE_OPTIMIZATION=false

# 开发环境配置
# DEBUG=true
# LOG_LEVEL=DEBUG
# DATABASE_ECHO=true
# CACHE_CONFIG__ENABLE_CACHE=false
# ML_CONFIG__PREDICTION_MODEL__MIN_ACCURACY_THRESHOLD=0.5