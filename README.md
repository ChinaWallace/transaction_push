# ğŸš€ Python æ™ºèƒ½é‡åŒ–äº¤æ˜“åˆ†æå·¥å…· v1.2.0

[![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![AI Powered](https://img.shields.io/badge/AI-Kronos%20Powered-purple.svg)](https://github.com/NeoQuasar/Kronos)

## âš ï¸ é‡è¦å£°æ˜

**å…³äºOKXäº¤æ˜“æ‰€æ”¯æŒå˜æ›´**

ç”±äºOKXäº¤æ˜“æ‰€å­˜åœ¨æ¶æ„å¹³æ‰ç”¨æˆ·ä»“ä½çš„ä¸å½“è¡Œä¸ºï¼Œä¸¥é‡æŸå®³äº†ç”¨æˆ·åˆ©ç›Šå’Œäº¤æ˜“å…¬å¹³æ€§ï¼Œ**æœ¬é¡¹ç›®è‡ªå³æ—¥èµ·ä¸å†æ”¯æŒOKXäº¤æ˜“æ‰€çš„æ–°åŠŸèƒ½å¼€å‘**ã€‚

- âœ… **ä¿ç•™ç°æœ‰ä»£ç **ï¼šå·²æœ‰çš„OKXç›¸å…³ä»£ç å°†ç»§ç»­ä¿ç•™ï¼Œç¡®ä¿ç°æœ‰ç”¨æˆ·çš„ä½¿ç”¨ä¸å—å½±å“
- âŒ **åœæ­¢æ–°åŠŸèƒ½å¼€å‘**ï¼šä¸å†ä¸ºOKXäº¤æ˜“æ‰€å¼€å‘æ–°åŠŸèƒ½æˆ–è¿›è¡Œé€‚é…ä¼˜åŒ–
- ğŸ¯ **ä¸“æ³¨å¸å®‰é€‚é…**ï¼šåç»­æ‰€æœ‰æ–°åŠŸèƒ½å°†ä¸“æ³¨äºBinanceäº¤æ˜“æ‰€çš„æ”¯æŒå’Œä¼˜åŒ–

æˆ‘ä»¬å»ºè®®ç”¨æˆ·è¿ç§»è‡³æ›´åŠ å¯é å’Œå…¬å¹³çš„Binanceäº¤æ˜“æ‰€ã€‚

---

åŸºäºPythonçš„**æ™ºèƒ½é‡åŒ–äº¤æ˜“åˆ†æå·¥å…· v1.2.0**ï¼Œå®Œæ•´æ”¯æŒBinanceæœŸè´§äº¤æ˜“æ‰€ï¼Œé›†æˆKronos AIé¢„æµ‹æ¨¡å‹ã€æŠ€æœ¯åˆ†æå’Œæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œä¸“ä¸ºåŠ å¯†è´§å¸å¸‚åœºè®¾è®¡çš„äº¤æ˜“å†³ç­–ç³»ç»Ÿã€‚

## ğŸ†• v1.2.0 æ›´æ–°å†…å®¹

- âœ… **å®Œæ•´é€‚é…BinanceæœŸè´§API** - å…¨é¢æ”¯æŒå¸å®‰æœŸè´§äº¤æ˜“æ‰€

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ§  Kronos AI é¢„æµ‹** - åŸºäº Transformer çš„é‡‘èé¢„æµ‹æ¨¡å‹
- **ğŸ“Š å¤šç»´åº¦åˆ†æ** - æŠ€æœ¯åˆ†æ + æœºå™¨å­¦ä¹  + AI é¢„æµ‹
- **ğŸ”„ å®æ—¶ç›‘æ§** - è´Ÿè´¹ç‡ã€å¼‚å¸¸æ³¢åŠ¨ã€æŒä»“é‡ç›‘æ§ã€Tradingviewå¼ºåŠ¿å¸æ¨é€
- **ğŸ“± æ™ºèƒ½é€šçŸ¥** - é£ä¹¦ã€ä¼ä¸šå¾®ä¿¡å¤šæ¸ é“æ¨é€
- **âš¡ é«˜æ€§èƒ½æ¶æ„** - FastAPI + å¼‚æ­¥å¤„ç†
- **ğŸ¯ ç­–ç•¥å›æµ‹** - å®Œæ•´çš„ç­–ç•¥éªŒè¯å’Œä¼˜åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Python 3.11+
- MySQL 8.0+
- 4GB+ å†…å­˜ (æ¨è 16GB)

### ğŸ”§ å®‰è£…é…ç½®

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/ChinaWallace/transaction_push.git
cd transaction_push
```

2. **å®‰è£…ä¾èµ–**
```bash
# 1. å‡çº§pip
python -m pip install --upgrade pip

# 2. å®‰è£…TA-LibæŠ€æœ¯æŒ‡æ ‡åº“
# Windows (æ¨èä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬):
pip install --find-links https://github.com/cgohlke/talib-build/releases/download/v0.4.28/ TA-Lib

# Linux/Ubuntu:
sudo apt-get install libta-lib-dev && pip install TA-Lib

# macOS:
brew install ta-lib && pip install TA-Lib

# 3. å®‰è£…å…¶ä»–Pythonä¾èµ–
pip install -r requirements.txt

# 4. ä¸‹è½½Kronos AIæ¨¡å‹
python scripts/download_kronos_models.py
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
# å¿…é¡»é…ç½®: äº¤æ˜“æ‰€ APIã€æ•°æ®åº“è¿æ¥ã€é€šçŸ¥ Webhook
```

4. **å¯åŠ¨æœåŠ¡**
```bash
python main.py
```

### ğŸ›ï¸ æ ¸å¿ƒé…ç½®

```env
# ğŸ”‘ äº¤æ˜“æ‰€APIé…ç½® (é€‰æ‹©ä¸€ä¸ª)
# å¸å®‰æœŸè´§äº¤æ˜“æ‰€ (æ¨è - v1.2.0å®Œæ•´é€‚é…)
BINANCE_API_KEY=your_binance_api_key
BINANCE_SECRET_KEY=your_binance_secret_key
BINANCE_BASE_URL=https://fapi.binance.com
EXCHANGE_PROVIDER=binance

# æˆ–è€…OKXäº¤æ˜“æ‰€ (ä¸æ¨èï¼Œä»…ä¿ç•™å…¼å®¹æ€§)
# OKX_API_KEY=your_okx_api_key
# OKX_SECRET_KEY=your_okx_secret_key  
# OKX_PASSPHRASE=your_okx_passphrase
# EXCHANGE_PROVIDER=okx

# ğŸ’¾ æ•°æ®åº“é…ç½®
DATABASE_URL=mysql+pymysql://root:password@localhost:3306/trading_db

# ğŸ“¢ é€šçŸ¥é…ç½®ï¼ˆè‡³å°‘é€‰æ‹©ä¸€ä¸ªï¼‰
FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/your_webhook_key
# æˆ–
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key

# ğŸ¤– Kronos AIé…ç½®
KRONOS_CONFIG__ENABLE_KRONOS_PREDICTION=true
KRONOS_CONFIG__USE_GPU=false

# ğŸ“Š ç›‘æ§å¸ç§é…ç½®
MONITORED_SYMBOLS=["BTC-USDT-SWAP","ETH-USDT-SWAP","SOL-USDT-SWAP"]
```

### ğŸ—„ï¸ æ•°æ®åº“åˆå§‹åŒ–

```bash
# 1. ç¡®ä¿MySQLæœåŠ¡è¿è¡Œ
# Windows: net start mysql
# Linux: sudo systemctl start mysql

# 2. åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
mysql -u root -p -e "CREATE DATABASE IF NOT EXISTS trading_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# 3. åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
python scripts/init_db.py

# 4. éªŒè¯æ•°æ®åº“è¿æ¥
python -c "from app.core.database import db_manager; print('âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ' if db_manager.health_check() else 'âŒ æ•°æ®åº“è¿æ¥å¤±è´¥')"
```

**ğŸ”§ æ•°æ®åº“é…ç½®è¯´æ˜**
```env
# æ ‡å‡†MySQLé…ç½®
DATABASE_URL=mysql+pymysql://ç”¨æˆ·å:å¯†ç @localhost:3306/trading_db

# ç¤ºä¾‹é…ç½®
DATABASE_URL=mysql+pymysql://root:your_password@localhost:3306/trading_db

# å¦‚æœä½¿ç”¨é»˜è®¤ç«¯å£å’Œæœ¬åœ°è¿æ¥
DATABASE_URL=mysql+pymysql://root:password@127.0.0.1:3306/trading_db
```

**âš™ï¸ é…ç½®éªŒè¯**
```bash
# éªŒè¯é…ç½®æ–‡ä»¶
python -c "
from app.core.config import get_settings
try:
    settings = get_settings()
    print('âœ… é…ç½®æ–‡ä»¶åŠ è½½æˆåŠŸ')
    print(f'äº¤æ˜“æ‰€: {settings.exchange_provider}')
    print(f'æ•°æ®åº“: å·²é…ç½®')
    print(f'é€šçŸ¥: å·²é…ç½®' if hasattr(settings, 'feishu_webhook_url') and settings.feishu_webhook_url else 'æœªé…ç½®')
except Exception as e:
    print(f'âŒ é…ç½®æ–‡ä»¶é”™è¯¯: {e}')
"

# æµ‹è¯•APIè¿æ¥
python -c "
import asyncio
from app.services.exchanges.exchange_service_manager import get_exchange_service
async def test():
    try:
        service = await get_exchange_service()
        health = await service.health_check()
        print('âœ… äº¤æ˜“æ‰€APIè¿æ¥æˆåŠŸ' if health.get('overall_status') == 'healthy' else 'âŒ APIè¿æ¥å¤±è´¥')
    except Exception as e:
        print(f'âŒ APIè¿æ¥å¤±è´¥: {e}')
asyncio.run(test())
"
```

### ğŸ¯ å¯åŠ¨æœåŠ¡

**ğŸ–¥ï¸ å¼€å‘æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰**
```bash
python main.py
```

**ğŸš€ åå°è¿è¡Œæ¨¡å¼**
```bash
# Windows - åŒå‡»è¿è¡Œ
start_service.bat

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
python scripts/daemon_runner.py start
```

**ğŸ”§ WindowsæœåŠ¡æ¨¡å¼ï¼ˆå¯é€‰ï¼‰**
```bash
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
scripts\install_service.bat

# å¯åŠ¨æœåŠ¡
net start TradingToolService
```

### âœ… éªŒè¯å®‰è£…

**1. æ£€æŸ¥æœåŠ¡çŠ¶æ€**
```bash
# è¿è¡ŒçŠ¶æ€æ£€æŸ¥è„šæœ¬
python scripts/check_status.py

# æˆ–æ‰‹åŠ¨æ£€æŸ¥API
curl http://localhost:8888/health
```

**2. è®¿é—®Webç•Œé¢**
- **ğŸŒ APIæ–‡æ¡£**: http://localhost:8888/docs
- **â¤ï¸ å¥åº·æ£€æŸ¥**: http://localhost:8888/health  
- **ğŸ“Š æœåŠ¡ç»Ÿè®¡**: http://localhost:8888/api/unified-data/service-stats

**3. é¢„æœŸå¥åº·æ£€æŸ¥è¾“å‡º**
```json
{
  "status": "healthy",
  "services": {
    "database": "connected",
    "kronos_ai": "loaded",
    "scheduler": "running",
    "exchange_service": "connected"
  },
  "timestamp": "2025-01-01T12:00:00Z"
}
```



## ğŸ“¡ APIæ¥å£æ–‡æ¡£

### ğŸ¯ æ ¸å¿ƒäº¤æ˜“API

**ç»¼åˆäº¤æ˜“å†³ç­–**
```http
POST /api/core-trading/analyze/{symbol}
# Kronos + æŠ€æœ¯åˆ†æ + MLèåˆåˆ†æ

GET /api/core-trading/signals  
# è·å–æ‰€æœ‰äº¤æ˜“ä¿¡å·

POST /api/core-trading/batch-analyze
{
  "symbols": ["BTC-USDT-SWAP", "ETH-USDT-SWAP"],
  "analysis_type": "integrated"
}

# è·å–äº¤æ˜“ä¿¡å·
GET /api/core-trading/signals/BTC-USDT-SWAP
```

### ğŸ“ˆ ç›‘æ§æ¥å£
```bash
# è´Ÿè´¹ç‡ç›‘æ§
GET /api/monitoring/funding-rates

# å¼‚å¸¸æ£€æµ‹
GET /api/monitoring/anomalies

# ç³»ç»Ÿå¥åº·æ£€æŸ¥
GET /health
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
app/
â”œâ”€â”€ api/                    # FastAPI è·¯ç”±å±‚
â”œâ”€â”€ core/                   # æ ¸å¿ƒé…ç½®å’ŒåŸºç¡€è®¾æ–½
â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ trading/           # äº¤æ˜“å†³ç­–æœåŠ¡
â”‚   â”œâ”€â”€ ml/                # AI/ML æœåŠ¡
â”‚   â”œâ”€â”€ monitoring/        # ç›‘æ§æœåŠ¡
â”‚   â”œâ”€â”€ notification/      # é€šçŸ¥æœåŠ¡
â”‚   â””â”€â”€ exchanges/         # äº¤æ˜“æ‰€æ¥å£
â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”œâ”€â”€ schemas/               # API æ•°æ®éªŒè¯
â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
```

## ğŸ¤– AI æ¨¡å‹è¯´æ˜

### Kronos AI é¢„æµ‹
- **æ¨¡å‹**: NeoQuasar/Kronos-Tokenizer-base
- **åŠŸèƒ½**: åŸºäºå†å²æ•°æ®é¢„æµ‹ä»·æ ¼è¶‹åŠ¿
- **ç½®ä¿¡åº¦**: 0-1 è¯„åˆ†ç³»ç»Ÿ
- **æ”¯æŒ**: CPU/GPU åŠ é€Ÿ

### æœºå™¨å­¦ä¹ å¢å¼º
- **å¼‚å¸¸æ£€æµ‹**: è¯†åˆ«å¸‚åœºå¼‚å¸¸æ³¢åŠ¨
- **ä¿¡å·éªŒè¯**: éªŒè¯ AI é¢„æµ‹ç»“æœ
- **è‡ªé€‚åº”ä¼˜åŒ–**: æ ¹æ®å¸‚åœºæ¡ä»¶è°ƒæ•´ç­–ç•¥

## ğŸ“± é€šçŸ¥ç³»ç»Ÿ

æ”¯æŒå¤šç§é€šçŸ¥æ¸ é“ï¼š
- **é£ä¹¦æœºå™¨äºº** - å®æ—¶äº¤æ˜“ä¿¡å·æ¨é€
- **ä¼ä¸šå¾®ä¿¡** - é‡è¦äº‹ä»¶é€šçŸ¥
- **é‚®ä»¶é€šçŸ¥** - ç³»ç»ŸçŠ¶æ€æŠ¥å‘Š

## ğŸ”§ å¼€å‘æŒ‡å—

### ğŸ“ ä»£ç è§„èŒƒ
- éµå¾ª PEP 8 ä»£ç é£æ ¼
- ä½¿ç”¨ç±»å‹æ³¨è§£
- å¼‚æ­¥ä¼˜å…ˆ (async/await)
- å®Œæ•´çš„é”™è¯¯å¤„ç†

### ğŸ§ª æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/unit/
pytest tests/integration/

# æŸ¥çœ‹è¦†ç›–ç‡
pytest --cov=app
```

### ğŸ“Š æ€§èƒ½ç›‘æ§
- å†…ç½®æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- API å“åº”æ—¶é—´ç›‘æ§
- AI æ¨¡å‹é¢„æµ‹å»¶è¿Ÿè·Ÿè¸ª
- ç³»ç»Ÿèµ„æºä½¿ç”¨ç›‘æ§

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: Kronos æ¨¡å‹åŠ è½½å¤±è´¥**
```bash
# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls models/cache/models--NeoQuasar--Kronos-Tokenizer-base/

# é‡æ–°ä¸‹è½½æ¨¡å‹
python -c "from app.services.ml.kronos_service import download_model; download_model()"
```

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æ•°æ®åº“é…ç½®
python -c "from app.core.config import get_settings; print(get_settings().database_url)"

# æµ‹è¯•è¿æ¥
python -c "from app.core.database import test_connection; test_connection()"
```

**Q: API è°ƒç”¨è¶…æ—¶**
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯ API å¯†é’¥é…ç½®
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `logs/app.log`

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### èµ„æºé…ç½®å»ºè®®

| ç¯å¢ƒ | CPU | å†…å­˜ | GPU | å¹¶å‘æ•° |
|------|-----|------|-----|--------|
| å¼€å‘ | 4æ ¸+ | 8GB+ | å¯é€‰ | 2-4 |
| ç”Ÿäº§ | 8æ ¸+ | 16GB+ | æ¨è | 8-16 |

### ä¼˜åŒ–é…ç½®
```env
# é«˜æ€§èƒ½é…ç½®
KRONOS_CONFIG__USE_GPU=true
CACHE_CONFIG__MAX_CACHE_SIZE_MB=200
SERVICE_CONFIG__MAX_CONCURRENT_REQUESTS=16
```

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

- ğŸ› **å‘ç°Bug** - æäº¤IssueæŠ¥å‘Šé—®é¢˜
- ğŸ’¡ **åŠŸèƒ½å»ºè®®** - æå‡ºæ–°åŠŸèƒ½æƒ³æ³•
- ğŸ“ **æ–‡æ¡£æ”¹è¿›** - å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹
- ğŸ”§ **ä»£ç è´¡çŒ®** - æäº¤Pull

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼