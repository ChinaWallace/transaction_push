# ğŸš€ äº¤æ˜“å·¥å…·åå°æœåŠ¡éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°†å¸®ä½ æŠŠäº¤æ˜“å·¥å…·é…ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨çš„åå°æœåŠ¡ï¼Œå®ç°24/7ä¸é—´æ–­è¿è¡Œã€‚

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **WindowsæœåŠ¡** | ç³»ç»Ÿçº§æœåŠ¡ï¼Œæœ€ç¨³å®š | éœ€è¦ç®¡ç†å‘˜æƒé™ | ç”Ÿäº§ç¯å¢ƒï¼Œé•¿æœŸè¿è¡Œ |
| **å®ˆæŠ¤è¿›ç¨‹** | ç®€å•æ˜“ç”¨ï¼Œæ— éœ€ç®¡ç†å‘˜æƒé™ | ç”¨æˆ·ç™»å½•åæ‰å¯åŠ¨ | å¼€å‘æµ‹è¯•ï¼Œä¸ªäººä½¿ç”¨ |
| **ä»»åŠ¡è®¡åˆ’ç¨‹åº** | çµæ´»é…ç½®ï¼Œç³»ç»Ÿé›†æˆå¥½ | é…ç½®ç›¸å¯¹å¤æ‚ | å®šæ—¶ä»»åŠ¡ï¼Œæ¡ä»¶å¯åŠ¨ |

## ğŸ¯ æ¨èéƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šWindowsæœåŠ¡ (æ¨è)

**é€‚åˆåœºæ™¯**: ç”Ÿäº§ç¯å¢ƒã€æœåŠ¡å™¨ã€éœ€è¦24/7è¿è¡Œ

```bash
# 1. ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /d "C:\path\to\your\trading-tool"

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (å¦‚æœä½¿ç”¨)
.venv\Scripts\activate

# 4. å®‰è£…pywin32ä¾èµ–
pip install pywin32

# 5. å®‰è£…æœåŠ¡
python scripts\windows_service.py install

# 6. å¯åŠ¨æœåŠ¡
net start TradingToolService
```

**æˆ–è€…ä½¿ç”¨ä¸€é”®å®‰è£…è„šæœ¬**:
```bash
# å³é”®ç‚¹å‡» scripts\install_service.bat
# é€‰æ‹©"ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ"
```

### æ–¹æ¡ˆäºŒï¼šå®ˆæŠ¤è¿›ç¨‹ (ç®€å•)

**é€‚åˆåœºæ™¯**: ä¸ªäººç”µè„‘ã€å¼€å‘ç¯å¢ƒã€ä¸éœ€è¦ç®¡ç†å‘˜æƒé™

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /d "C:\path\to\your\trading-tool"

# 2. å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹
python scripts\daemon_runner.py start

# 3. æ·»åŠ åˆ°å¼€æœºå¯åŠ¨ (å¯é€‰)
python scripts\startup_script.py add_registry
```

**æˆ–è€…ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬**:
```bash
# åŒå‡»è¿è¡Œ scripts\start_daemon.bat
```

## ğŸ› ï¸ è¯¦ç»†å®‰è£…æ­¥éª¤

### Step 1: ç¯å¢ƒå‡†å¤‡

1. **ç¡®ä¿Pythonç¯å¢ƒæ­£å¸¸**
   ```bash
   python --version
   # åº”è¯¥æ˜¾ç¤º Python 3.8+
   ```

2. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ** (å¦‚æœä½¿ç”¨)
   ```bash
   .venv\Scripts\activate
   ```

3. **å®‰è£…å¿…è¦ä¾èµ–**
   ```bash
   pip install pywin32  # WindowsæœåŠ¡æ”¯æŒ
   ```

### Step 2: é€‰æ‹©éƒ¨ç½²æ–¹å¼

#### ğŸ”§ æ–¹å¼A: ä½¿ç”¨å›¾å½¢åŒ–ç®¡ç†å™¨ (æœ€ç®€å•)

1. **åŒå‡»è¿è¡Œ**: `scripts\service_manager.bat`
2. **é€‰æ‹©æ“ä½œ**: æ ¹æ®èœå•æç¤ºé€‰æ‹©å®‰è£…æ–¹å¼
3. **å®Œæˆé…ç½®**: æŒ‰ç…§å‘å¯¼å®Œæˆè®¾ç½®

#### ğŸ”§ æ–¹å¼B: ä½¿ç”¨å‘½ä»¤è¡Œ

**WindowsæœåŠ¡éƒ¨ç½²**:
```bash
# å®‰è£…æœåŠ¡ (éœ€è¦ç®¡ç†å‘˜æƒé™)
python scripts\windows_service.py install

# å¯åŠ¨æœåŠ¡
net start TradingToolService

# è®¾ç½®è‡ªåŠ¨å¯åŠ¨ (å·²é»˜è®¤è®¾ç½®)
sc config TradingToolService start= auto
```

**å®ˆæŠ¤è¿›ç¨‹éƒ¨ç½²**:
```bash
# å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹
python scripts\daemon_runner.py start

# æ·»åŠ åˆ°å¼€æœºå¯åŠ¨
python scripts\startup_script.py add_registry
```

### Step 3: éªŒè¯éƒ¨ç½²

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
   ```bash
   # WindowsæœåŠ¡
   sc query TradingToolService
   
   # å®ˆæŠ¤è¿›ç¨‹
   python scripts\daemon_runner.py status
   ```

2. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   # æœåŠ¡æ—¥å¿—
   type logs\service.log
   
   # å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—
   type logs\daemon.log
   
   # åº”ç”¨æ—¥å¿—
   type logs\app.log
   ```

3. **æµ‹è¯•é‡å¯**
   - é‡å¯ç”µè„‘
   - æ£€æŸ¥æœåŠ¡æ˜¯å¦è‡ªåŠ¨å¯åŠ¨
   - éªŒè¯äº¤æ˜“åŠŸèƒ½æ­£å¸¸

## ğŸ“Š æœåŠ¡ç®¡ç†

### å¯åŠ¨/åœæ­¢æœåŠ¡

**WindowsæœåŠ¡**:
```bash
net start TradingToolService    # å¯åŠ¨
net stop TradingToolService     # åœæ­¢
net restart TradingToolService  # é‡å¯ (éœ€è¦å…ˆåœæ­¢å†å¯åŠ¨)
```

**å®ˆæŠ¤è¿›ç¨‹**:
```bash
python scripts\daemon_runner.py start    # å¯åŠ¨
python scripts\daemon_runner.py stop     # åœæ­¢
python scripts\daemon_runner.py restart  # é‡å¯
```

### æŸ¥çœ‹çŠ¶æ€å’Œæ—¥å¿—

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
python scripts\daemon_runner.py status

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
powershell "Get-Content logs\app.log -Wait -Tail 50"

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
type logs\error.log
```

### æœåŠ¡é…ç½®

**ä¿®æ”¹æœåŠ¡å‚æ•°**: ç¼–è¾‘ `scripts\windows_service.py`
```python
# ä¿®æ”¹é‡å¯ç­–ç•¥
max_restarts = 10        # æœ€å¤§é‡å¯æ¬¡æ•°
restart_delay = 60       # é‡å¯å»¶è¿Ÿ(ç§’)

# ä¿®æ”¹æœåŠ¡ä¿¡æ¯
_svc_display_name_ = "ä½ çš„æœåŠ¡æ˜¾ç¤ºåç§°"
_svc_description_ = "ä½ çš„æœåŠ¡æè¿°"
```

## ğŸ”§ å¼€æœºå¯åŠ¨é…ç½®

### æ–¹æ³•1: æ³¨å†Œè¡¨å¯åŠ¨é¡¹
```bash
# æ·»åŠ åˆ°å¯åŠ¨é¡¹
python scripts\startup_script.py add_registry

# ç§»é™¤å¯åŠ¨é¡¹
python scripts\startup_script.py remove_registry

# æŸ¥çœ‹çŠ¶æ€
python scripts\startup_script.py status
```

### æ–¹æ³•2: ä»»åŠ¡è®¡åˆ’ç¨‹åº
```bash
# æ·»åŠ ä»»åŠ¡
python scripts\startup_script.py add_task

# ç§»é™¤ä»»åŠ¡
python scripts\startup_script.py remove_task
```

### æ–¹æ³•3: æœåŠ¡è‡ªåŠ¨å¯åŠ¨ (æ¨è)
WindowsæœåŠ¡é»˜è®¤è®¾ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å®‰è£…å¤±è´¥**
   ```
   é”™è¯¯: éœ€è¦ç®¡ç†å‘˜æƒé™
   è§£å†³: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
   ```

2. **pywin32æœªå®‰è£…**
   ```bash
   pip install pywin32
   # å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå°è¯•:
   python -m pip install --upgrade pywin32
   ```

3. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†é”™è¯¯
   type logs\service.log
   type logs\error.log
   
   # æ£€æŸ¥Pythonè·¯å¾„
   where python
   ```

4. **ç«¯å£å ç”¨**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -ano | findstr :8000
   
   # ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
   # ç¼–è¾‘ .env æ–‡ä»¶
   ```

### æ—¥å¿—åˆ†æ

**å…³é”®æ—¥å¿—æ–‡ä»¶**:
- `logs\service.log` - æœåŠ¡è¿è¡Œæ—¥å¿—
- `logs\daemon.log` - å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—  
- `logs\app.log` - åº”ç”¨ä¸»æ—¥å¿—
- `logs\trading.log` - äº¤æ˜“ç›¸å…³æ—¥å¿—
- `logs\error.log` - é”™è¯¯æ—¥å¿—

**å¸¸è§æ—¥å¿—å…³é”®è¯**:
- `âœ…` - æˆåŠŸæ“ä½œ
- `âŒ` - é”™è¯¯ä¿¡æ¯
- `âš ï¸` - è­¦å‘Šä¿¡æ¯
- `ğŸ”„` - é‡è¯•æ“ä½œ
- `ğŸš€` - å¯åŠ¨ä¿¡æ¯

## ğŸ“± ç›‘æ§å’Œé€šçŸ¥

æœåŠ¡éƒ¨ç½²åï¼Œä½ å°†æ”¶åˆ°ä»¥ä¸‹é€šçŸ¥:

1. **å¯åŠ¨é€šçŸ¥** - æœåŠ¡å¯åŠ¨å®Œæˆ
2. **äº¤æ˜“ä¿¡å·** - å‘ç°äº¤æ˜“æœºä¼š
3. **å¼‚å¸¸è­¦æŠ¥** - æœåŠ¡å¼‚å¸¸æˆ–é‡å¯
4. **å¸‚åœºæœºä¼š** - Kronos AIå‘ç°çš„æœºä¼š

**é…ç½®é€šçŸ¥æ¸ é“**: ç¼–è¾‘ `.env` æ–‡ä»¶
```env
# ä¼ä¸šå¾®ä¿¡é€šçŸ¥
WECHAT_WEBHOOK_URL=your_webhook_url

# é‚®ä»¶é€šçŸ¥  
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_USERNAME=your_email
EMAIL_PASSWORD=your_password
```

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–°ä»£ç 
```bash
# åœæ­¢æœåŠ¡
net stop TradingToolService

# æ›´æ–°ä»£ç 
git pull origin main

# é‡æ–°å®‰è£…ä¾èµ– (å¦‚æœéœ€è¦)
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
net start TradingToolService
```

### å®šæœŸç»´æŠ¤
```bash
# æ¸…ç†æ—§æ—¥å¿— (ä¿ç•™æœ€è¿‘7å¤©)
forfiles /p logs /s /m *.log /d -7 /c "cmd /c del @path"

# æ£€æŸ¥ç£ç›˜ç©ºé—´
dir logs

# å¤‡ä»½é…ç½®
copy .env .env.backup
```

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### ç³»ç»Ÿèµ„æºé…ç½®

**æ¨èé…ç½®**:
- CPU: 2æ ¸å¿ƒä»¥ä¸Š
- å†…å­˜: 4GBä»¥ä¸Š  
- ç£ç›˜: 10GBå¯ç”¨ç©ºé—´
- ç½‘ç»œ: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

**ä¼˜åŒ–è®¾ç½®**:
```python
# åœ¨ app/core/config.py ä¸­è°ƒæ•´
MAX_CONCURRENT_REQUESTS = 10  # å¹¶å‘è¯·æ±‚æ•°
REQUEST_TIMEOUT = 30          # è¯·æ±‚è¶…æ—¶æ—¶é—´
CACHE_TTL = 300              # ç¼“å­˜æ—¶é—´
```

### ç›‘æ§æŒ‡æ ‡

å®šæœŸæ£€æŸ¥ä»¥ä¸‹æŒ‡æ ‡:
- CPUä½¿ç”¨ç‡ < 50%
- å†…å­˜ä½¿ç”¨ç‡ < 70%  
- ç£ç›˜ä½¿ç”¨ç‡ < 80%
- ç½‘ç»œå»¶è¿Ÿ < 100ms

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜:

1. **æŸ¥çœ‹æ—¥å¿—**: é¦–å…ˆæ£€æŸ¥ç›¸å…³æ—¥å¿—æ–‡ä»¶
2. **é‡å¯æœåŠ¡**: å°è¯•é‡å¯è§£å†³ä¸´æ—¶é—®é¢˜
3. **æ£€æŸ¥é…ç½®**: ç¡®è®¤é…ç½®æ–‡ä»¶æ­£ç¡®
4. **æ›´æ–°ä¾èµ–**: ç¡®ä¿æ‰€æœ‰ä¾èµ–åŒ…æ˜¯æœ€æ–°ç‰ˆæœ¬

**å¿«é€Ÿè¯Šæ–­è„šæœ¬**:
```bash
# è¿è¡Œè¯Šæ–­
python scripts\service_manager.bat
# é€‰æ‹© "6. æŸ¥çœ‹æœåŠ¡çŠ¶æ€"
```

---

ğŸ‰ **æ­å–œï¼** ä½ çš„äº¤æ˜“å·¥å…·ç°åœ¨å¯ä»¥24/7ä¸é—´æ–­è¿è¡Œäº†ï¼

è®°å¾—å®šæœŸæ£€æŸ¥æ—¥å¿—å’Œç³»ç»ŸçŠ¶æ€ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œã€‚